<!DOCTYPE html>
<html>

<head>
    <nav class="navbar navbar-light bg-light">
        <div class="navbar-header">
            <%= link_to home_path do %>
            <%= fa_icon "home", size: '3x', id: "home-icon" %>
            <% end %>
        </div>

        <h1>Professional Brotherhood of Engineers</h1>

        <div class="navbar-nav navbar-right">
            <%= button_to "Logout", logout_path, method: "delete", :class => "btn btn-lg" %>
        </div>
    </nav>
</head>

<body>
    <h2><%= @user.firstName %> <%= @user.lastName %>, <% if @user.role?%>
        <%=@user.role %>
        <%else%>
        <%="member"%>
        <%end%></h2>
    <p id="standing"></p>

    <table summary="User detail view">
        <tr>
            <th>Current Points</th>
            <td><% if @user.points?%>
                <%=@user.points %>
                <%else%>
                <%=0%>
                <%end%></td>
        </tr>
        <tr>
            <th>Percent Attendance</th>
            <td><%=((user_events(@user.id).count.to_f / mandatory_events.count.to_f) * 100).round%>%</td>
        </tr>
        <tr>
            <th>Membership Eligibility</th>
            <td><%=(user_events(@user.id).count.to_f / mandatory_events.count.to_f) >= 0.5 ? "You are eligible" : "You are not eligible"%></td>
        </tr>
        <tr>
            <th>Officer Eligibility</th>
            <td><%=(user_events(@user.id).count.to_f / mandatory_events.count.to_f) >= 0.8 ? "You are eligible" : "You are not eligible"%></td>
        </tr>
    </table>

    <div id="links">
        <% if is_admin?%>
        <%= button_to "View All Users", memberlist_path, :method => "get", :class => "btn btn-lg btn-primary" %>
        <% end %>
    </div>

    <h3>Event Participation</h3>
    <table summary="Event view">
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Date</th>
        </tr>
        <% user_events(@user.id).each do |event| %>
        <tr>
            <td><%= event.title %></td>
            <td><%= event.description %></td>
            <td><%= event.date %></td>
        </tr>
        <% end %>
    </table>

</body>

</html>